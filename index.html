<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABlBMVEX///8AAABVwtN+AAAAAXRSTlMAQObYZgAAAC1JREFUeAFjwAUYGZHYIAClwHwUhThNAAMMlQQEsGhhxGkoXgMZMZwOB7hNAAAaYAAxcvuQHgAAAABJRU5ErkJggg==">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<script>
var game =
{
	canvas:
	{
		load: function ()
		{
			var canvas = window.document.createElement ('canvas');
				canvas.context = canvas.getContext ('2d');

				canvas.redraw = true;
				canvas.scene = [];
				canvas.style.position = 'absolute';
				canvas.z = 0;

				canvas.autosize = function ()
				{
					this.height = window.innerHeight;
					this.width = window.innerWidth;
				};

				canvas.clear = function ()
				{
					canvas.context.clearRect (0, 0, canvas.width, canvas.height);
				};

				canvas.update = function ()
				{
					switch (game.event.type)
					{
						case 'load':
							canvas.autosize ();
						break;

						case 'resize':
							canvas.autosize ();
							canvas.redraw = true;
						break;
					};
				};

			delete game['canvas'];
			game.canvas = canvas;

			window.document.body.appendChild (canvas);
		}
	},

	data:
	{
		image: {},

		set load (data)
		{
			for (var tag in data)
			{
				switch (tag)
				{
					case 'image':
						for (var id in data[tag])
						{
							var image = new Image ();
								image.src = data[tag][id];
								game.data.image[id] = image;
						};
					break;
				};
			};
		}
	},


	draw: function ()
	{
		if (game.canvas.redraw)
		{
			var context = game.canvas.context;
			var z = 0;

			game.canvas.clear ();

			while (z <= game.canvas.z)
			{
				for (var id = game.canvas.scene.length; (id--) && (game.canvas.scene.length > 0);)
				{
					var draw = game.canvas.scene[id];

					var a = draw.a;
					var b = draw.b;

					var h = draw.h;
					var r = draw.r;
					var w = draw.w;

					var x = draw.x;
					var y = draw.y;

					switch (draw.type)
					{
						case 'box':
							var _ = (draw.fill) ? context.fillRect (x, y, w, h) : context.strokeRect (x, y, w, h);
						break;

						case 'image':
							var _ = (h) ? context.drawImage (draw.image, x, y, w, h) : context.drawImage (draw.image, x, y);
						break;

						case 'line':
							context.beginPath ();
							context.moveTo (a, b);
							context.lineTo (x, y);
							var _ = (draw.fill) ? context.fill () : context.stroke ();
						break;

						case 'ring':
							context.beginPath ();
							context.arc (x, y, r, a, b);
							var _ = (draw.fill) ? context.fill () : context.stroke ();
						break;
					};
				};
				z++;
			};

			game.canvas.redraw = false;
		};
	},

	event:
	{
		load: function ()
		{
			game.event.manager (event);

			window.onclick = game.event.manager;
			window.onresize = game.event.manager;
			window.ontick = game.event.manager;
		},

		manager: function (event)
		{
			game.event.tick = event.tick;
			game.event.time = event.time;
			game.event.type = event.type;
			game.event.x = event.x;
			game.event.y = event.y;
			game.event.run ();
		},

		run: function ()
		{
			game.update ();
			game.draw ();
		}
	},

	load: function ()
	{
		game.window.load ();
		game.canvas.load ();
		game.event.load ();
		game.run ();
	},

	object:
	{
		create:
		{

		},

		set destroy (destroy)
		{

		}
	},

	set paint (paint)
	{
		paint.id = (paint.id) ? paint.id : game.canvas.scene.length;

		paint.type = 'box';
		paint.type = (paint.a) ? 'line' : paint.type;
		paint.type = (paint.image) ? 'image' : paint.type;
		paint.type = (paint.r) ? 'ring' : paint.type;

		paint.z = (paint.z) ? paint.z : 0;
		if (paint.z > game.canvas.z) game.canvas.z = paint.z;

		game.canvas.scene[game.canvas.scene.length] = paint;
		game.canvas.redraw = true;
	},

	update: function (update)
	{
		game.canvas.update ();
	},

	window:
	{
		load: function ()
		{
			Object.defineProperties
			(
				window,
				{
					'load':
					{
						set: function (load)
						{
							load ();
						}
					},

					'log':
					{
						set: function (message)
						{
							window.console.log (message);
						}
					},

					'ontick':
					{
						set: function (f)
						{
							window.clock = window.setInterval
							(
								function ()
								{
									f ({ tick: window.tick, time: window.time, type: 'tick' });
									window.time += window.tick;
								},
								window.tick
							);
						}
					},

					'tick':
					{
						value: 100,
						writable: true
					},

					'time':
					{
						value: 0,
						writable: true
					}
				}
			);

			window.load = function ()
			{
				window.document.body.style.margin = 0;
			};

			delete game['window'];

			game.window = window;
		}
	}
};

window.onload = game.load;

game.data.load =
{
	image:
	{
		logo: 'logo.png'
	}
};

game.run = function ()
{
	game.paint = {x: 100, y: 100, h: 100, w: 100, fill: true};
	game.paint = {a: 300, b: 100, x: 400, y: 100};
	game.paint = {a: 0, b: 2 * Math.PI, x: 500, y: 100, r: 50};
	game.paint = {x: 700, y: 100, image: game.data.image.logo};
};

</script>
